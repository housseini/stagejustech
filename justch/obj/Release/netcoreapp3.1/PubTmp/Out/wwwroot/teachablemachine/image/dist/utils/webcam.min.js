/**
 * Minified by jsDelivr using Terser v5.13.1.
 * Original file: /npm/@teachablemachine/image@0.8.5/dist/utils/webcam.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";
/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var __decorate=this&&this.__decorate||function(e,t,o,a){var r,n=arguments.length,i=n<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,o):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,o,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(n<3?r(i):n>3?r(t,o,i):r(t,o))||i);return n>3&&i&&Object.defineProperty(t,o,i),i},__awaiter=this&&this.__awaiter||function(e,t,o,a){return new(o||(o=Promise))((function(r,n){function i(e){try{u(a.next(e))}catch(e){n(e)}}function c(e){try{u(a.throw(e))}catch(e){n(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(i,c)}u((a=a.apply(e,t||[])).next())}))},__generator=this&&this.__generator||function(e,t){var o,a,r,n,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return n={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function c(n){return function(c){return function(n){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,a&&(r=2&n[0]?a.return:n[0]?a.throw||((r=a.return)&&r.call(a),0):a.next)&&!(r=r.call(a,n[1])).done)return r;switch(a=0,r&&(n=[2&n[0],r.value]),n[0]){case 0:case 1:r=n;break;case 4:return i.label++,{value:n[1],done:!1};case 5:i.label++,a=n[1],n=[0];continue;case 7:n=i.ops.pop(),i.trys.pop();continue;default:if(!(r=i.trys,(r=r.length>0&&r[r.length-1])||6!==n[0]&&2!==n[0])){i=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){i.label=n[1];break}if(6===n[0]&&i.label<r[1]){i.label=r[1],r=n;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(n);break}r[2]&&i.ops.pop(),i.trys.pop();continue}n=t.call(e,i)}catch(e){n=[6,e],a=0}finally{o=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,c])}}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Webcam=void 0;var autobind_decorator_1=require("autobind-decorator"),canvas_1=require("./canvas"),defaultVideoOptions={facingMode:"user",frameRate:24},fillConstraints=function(e){return e.facingMode=e.facingMode||defaultVideoOptions.facingMode,e.frameRate=e.frameRate||defaultVideoOptions.frameRate,e.aspectRatio=e.aspectRatio||defaultVideoOptions.aspectRatio,e},Webcam=function(){function e(e,t,o){void 0===e&&(e=400),void 0===t&&(t=400),void 0===o&&(o=!1),this.width=e,this.height=t,this.flip=o}return e.prototype.getWebcam=function(e){if(void 0===e&&(e={}),!window.navigator.mediaDevices||!window.navigator.mediaDevices.getUserMedia)return Promise.reject("Your browser does not support WebRTC. Please try another one.");e.width=640;var t=fillConstraints(e),o=document.createElement("video");return window.navigator.mediaDevices.getUserMedia({video:t}).then((function(e){return o.srcObject=e,o.addEventListener("loadedmetadata",(function(e){var t=o.videoWidth,a=o.videoHeight;o.width=t,o.height=a})),o}),(function(){return Promise.reject("Could not open your camera. You may have denied access.")}))},e.prototype.setup=function(e){return void 0===e&&(e={}),__awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(o){switch(o.label){case 0:return this.webcam?[3,2]:(t=this,[4,this.getWebcam(e)]);case 1:t.webcam=o.sent(),this.canvas||(this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height),o.label=2;case 2:return[2]}}))}))},e.prototype.play=function(){return this.webcam.play()},e.prototype.pause=function(){this.webcam.pause()},e.prototype.stop=function(){this.stopStreamedVideo(this.webcam)},e.prototype.update=function(){this.renderCameraToCanvas()},e.prototype.stopStreamedVideo=function(e){e.srcObject.getTracks().forEach((function(e){e.stop()})),e.srcObject=null},e.prototype.renderCameraToCanvas=function(){if(this.canvas&&this.webcam){var e=this.canvas.getContext("2d");if(0!==this.webcam.videoWidth){var t=canvas_1.cropTo(this.webcam,this.width,this.flip);e.drawImage(t,0,0)}}},__decorate([autobind_decorator_1.default],e.prototype,"getWebcam",null),__decorate([autobind_decorator_1.default],e.prototype,"setup",null),__decorate([autobind_decorator_1.default],e.prototype,"play",null),__decorate([autobind_decorator_1.default],e.prototype,"pause",null),__decorate([autobind_decorator_1.default],e.prototype,"stop",null),__decorate([autobind_decorator_1.default],e.prototype,"update",null),__decorate([autobind_decorator_1.default],e.prototype,"stopStreamedVideo",null),__decorate([autobind_decorator_1.default],e.prototype,"renderCameraToCanvas",null),e}();exports.Webcam=Webcam;
//# sourceMappingURL=/sm/9a4bd9dc2b93107ea6295b971acfc3404ee560311f62c7e960d5ebc48e3fd22c.map